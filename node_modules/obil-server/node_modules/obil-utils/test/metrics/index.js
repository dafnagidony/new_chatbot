var metrics = require('../..').metrics;
var test = require('tape');


test('Metrics', {skip: false}, function(t) {
  t.test('Interface', function(tt) {
    tt.test('should export a client & plugin', function(ttt) {
      ttt.equal(typeof metrics.Client, 'function', 'as function');
      ttt.equal(typeof metrics.plugin, 'function', 'as function');
      ttt.end();
    });

    tt.test('instance should expose methods', function(ttt) {
      var Client = new metrics.Client('localhost', 8152);
      ttt.equal(typeof Client.set, 'function', 'as function');
      ttt.equal(typeof Client.increment, 'function', 'as function');
      Client = null;
      ttt.end();
    });

    tt.test('plugin should expose methods', function(ttt) {
      var Client = new metrics.Client('localhost', 8152);
      var plugin = metrics.plugin(Client);
      ttt.equal(typeof plugin, 'function', 'as function');
      Client = null;
      ttt.end();
    });

    tt.end();
  });
  t.end();
});
