var test = require('tape');
var path = require('path');
var helpers = require('../..').helpers;
var fixturePath = path.join(path.resolve(__dirname), '../fixtures/foo-package/dependencies/bar-dependency');

test('helpers', {skip: false}, function(t) {
  t.test('map', function(tt) {
    tt.test('map.[size|clear|delete|entries|forEach|get|has|keys|set|values]', function(ttt) {
      ttt.test('should expose `Map` methods', function(tttt) {
        ['size', 'clear', 'delete', 'entries', 'forEach', 'get', 'has', 'keys', 'set', 'values'].forEach(function(method) {
          tttt.deepEqual(helpers.map()[method], new Map()[method], `exposes the ${method} method`);
        });

        tttt.end();
      });
    });
  });

  t.test('getFilePaths', function(tt) {
    tt.test('should get array containing paths to file', function(ttt) {
      process.chdir(fixturePath);

      helpers.getFilePaths(path.resolve('./'), 'package.json', function(results) {
        ttt.equal(results.length, 3);
        ttt.equal(results[2], path.resolve(__dirname, '../..') + '/');
        ttt.end();
      });

      process.chdir(__dirname);
    });
  });
});
