var orm = require('orm');
var core = require('../../core');
var debug = core.debug('obil:utils:store:ormStore');

exports.connect = function(options) {
  return core.promise(function promiseToConnect(resolve, reject) {
    orm.connect(options, function(err, db) {
      if (err) {
        return reject(err);
      }
      debug.info(`Store ${options.protocol} active and listening ${(options.host || options.database)}:${(options.port || '')}`);
      return resolve(db);
    });
  });
};
